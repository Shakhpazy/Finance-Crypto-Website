<%- include("template/header.ejs") %>

<section id="hero">
    <div class="px-4 my-5 text-center">

      <svg height="10em" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 100 125" style="enable-background:new 0 0 100 100;" xml:space="preserve">
        <style type="text/css">
          .st0{fill:none;stroke:#ffffff;stroke-width:3.1282;stroke-linecap:round;stroke-miterlimit:10;}
          .st1{fill:none;stroke:#ffffff;stroke-width:4;stroke-linejoin:round;stroke-miterlimit:10;}
          .st2{fill:none;stroke:#ffffff;stroke-width:4;stroke-linecap:round;stroke-miterlimit:10;}
          .st3{fill:none;stroke:#ffffff;stroke-width:3;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}
          .st4{fill:none;stroke:#ffffff;stroke-width:3;stroke-linejoin:round;stroke-miterlimit:10;}
        </style>
        <g>
          <path d="M30.2,43.7c0.3,0,0.7-0.1,1-0.4c3.9-3.4,9-1.8,9.3-1.7c0.8,0.3,1.6-0.2,1.9-0.9c0.3-0.8-0.2-1.6-0.9-1.9 c-0.3-0.1-6.9-2.2-12.2,2.3c-0.6,0.5-0.7,1.5-0.2,2.1C29.4,43.5,29.8,43.7,30.2,43.7z"/>
          <path d="M15.8,68.2c-2.3,3.8-1.9,8.7,1,12c1.9,2.1,4.5,3.4,7.4,3.5h0.3c2.7,0,5.3-1.1,7.2-3l1.4-1.4c3.6,0.8,7.3,0.9,10.8,0.3 l0.9,0.9c3.9,3.8,10.1,4.1,14.1,0.6c3.1-2.7,4.2-7.1,2.7-10.9c1-1.3,1.9-2.8,2.8-4.7l0.1,0c3.4,0,6.1-2.7,6.1-6.1l0-8.1 c0-1.6-0.6-3.2-1.7-4.4c-1.1-1.2-2.7-1.8-4.3-1.8h-0.1c-1.5-2.9-3.6-5.6-6.3-7.8l0.3-2.9c0.3-3,0.4-3.9,0.3-4.5 c-0.2-1.5-1.3-2.5-2.8-2.5c0,0,0,0,0,0c-3.3-0.1-9.4,2.9-11.2,3.8c-0.1,0-0.2,0.1-0.3,0c-1.9-0.3-3.9-0.5-5-0.5 C29.1,30.8,19.7,36,15,44.4c-0.1,0.2-0.2,0.3-0.2,0.5c0-0.3,0.2-0.5,0.2-0.5c-1,1.5-2.5,4.3-3,8.4c-1.1,0.6-2.4,0.6-3.5,0 c-0.9-0.5-1.5-1.3-1.8-2.2s-0.2-2,0.3-2.9c0.4-0.7,0.1-1.6-0.6-2c-0.7-0.4-1.6-0.1-2,0.6c-0.9,1.6-1.1,3.4-0.5,5.2 c0.5,1.7,1.7,3.2,3.3,4c1,0.5,2.1,0.8,3.2,0.8c0.5,0,1.1-0.1,1.6-0.2C12,60.3,13.3,64.5,15.8,68.2z M17.4,46c0-0.1,0.1-0.1,0.1-0.2 c4.2-7.4,12.6-12,21.9-12c1,0,3.5,0.3,4.6,0.5c0.7,0.1,1.4,0,2-0.3c3.3-1.7,7.7-3.4,9.7-3.4c0,0.6-0.1,2.2-0.3,3.7l-0.4,3.7 c0,0.5,0.2,1,0.6,1.3c2.8,2.2,5.1,5,6.5,8.1c0.2,0.5,0.8,0.9,1.4,0.9h1c0.8,0,1.6,0.3,2.2,0.9c0.6,0.6,0.9,1.4,0.9,2.2v8.1 c0,1.7-1.4,3.1-3,3.1l-1,0c-0.6,0-1.2,0.3-1.4,0.9c-1.1,2.3-2.2,4.1-3.3,5.4c-0.5,0.6-0.6,1.3-0.3,2c1.3,2.8,0.6,6-1.7,8 c-2.9,2.5-7.2,2.3-10-0.4L45.3,77c-0.3-0.3-0.8-0.5-1.3-0.4c-3.6,0.7-7.5,0.6-11.2-0.3c-0.5-0.1-1,0-1.4,0.4l-1.9,1.9 c-1.3,1.3-3.2,2.1-5,2.1l-0.2,0c-2-0.1-3.8-0.9-5.2-2.4c-2.1-2.4-2.3-6.1-0.5-8.8c0.5-0.8,0.5-1.8,0-2.5c-2.4-3.5-3.7-7.5-3.7-11.5 C14.8,50.7,16.5,47.5,17.4,46z"/>
          <circle cx="51.8" cy="50.3" r="2.7" fill="#9693f5"/>
          <path d="M86.5,80.2c-0.3,0-0.6,0-0.9,0v-11c0-2.4-4.7-3.3-8.8-3.3S68,66.9,68,69.3v16.2c0,2.6,5.5,3.3,8.8,3.3c0.3,0,0.6,0,0.9,0 v1.3c0,2.6,5.5,3.3,8.8,3.3s8.8-0.7,8.8-3.3v-6.5C95.2,81.1,90.5,80.2,86.5,80.2z M93.2,86.6c-0.3,0.4-2.6,1.3-6.8,1.3 s-6.4-0.9-6.8-1.3v-0.9c1.9,0.8,4.8,1.1,6.8,1.1s4.9-0.3,6.8-1.1V86.6z M83.5,72.4c-0.3,0.4-2.6,1.3-6.8,1.3s-6.4-0.9-6.8-1.3v-0.9 c1.7,0.7,4.4,1,6.8,1s5-0.3,6.8-1V72.4z M76.8,75.8c2.4,0,5-0.3,6.8-1v0.9c-0.3,0.4-2.6,1.3-6.8,1.3s-6.4-0.9-6.8-1.3v-0.9 C71.7,75.5,74.4,75.8,76.8,75.8z M76.8,79c2.4,0,5-0.3,6.8-1v0.9c-0.3,0.4-2.6,1.3-6.8,1.3s-6.4-0.9-6.8-1.3v-0.9 C71.7,78.7,74.4,79,76.8,79z M70,81.2c1.9,0.8,4.8,1.1,6.8,1.1c0.5,0,1,0,1.5,0c-0.3,0.4-0.5,0.8-0.6,1.2c-0.3,0-0.6,0-0.9,0 c-4.1,0-6.4-0.9-6.8-1.3V81.2z M93.1,83.5c-0.6,0.5-2.8,1.3-6.7,1.3s-6.1-0.8-6.7-1.3c0.6-0.5,2.8-1.3,6.7-1.3S92.6,83,93.1,83.5z M76.8,68c3.9,0,6.1,0.8,6.7,1.3c-0.6,0.5-2.8,1.3-6.7,1.3s-6.1-0.8-6.7-1.3C70.6,68.8,72.9,68,76.8,68z M70,85.3v-0.9 c1.7,0.7,4.4,1,6.8,1c0.3,0,0.6,0,0.9,0v1.2c-0.3,0-0.6,0-0.9,0C72.6,86.7,70.3,85.8,70,85.3z M79.7,89.9v-0.9c1.7,0.7,4.4,1,6.8,1 s5-0.3,6.8-1v0.9c-0.3,0.4-2.6,1.3-6.8,1.3S80,90.3,79.7,89.9z"/>
        </g>
      </svg>      

        <h1 class="m-0" style="color: white; font-weight: 200;">Show the price of <span style="color: #9693f5;">A</span> with</h1>
        <h1 class="m-0" style="color: white; font-weight: 200;">the market cap of <span style="color: #9693f5;">B</span></h1>
        <div class="twoCrypto container mt-5">
          <form action="/" method="POST" id="form1">
            <div class="row row1">
              <div class="col"> 
                <input autocomplete="off" type="text" class="search-bar crypto 1 form-control" placeholder="Coin 1" id="search-bar-1" name="fcoin1">
                <ul id="suggestions-1" class="dropdown"></ul>
              </div>
              <div class="col">
                <button type="submit" id="calculate" class="calculatebutton btn">Calculate</button>
              </div>
              <div class="col">
                <input autocomplete="off" type="text" class="search-bar crypto 2 form-control" placeholder="Coin 2" id="search-bar-2" name="fcoin2">
                <ul id="suggestions-2" class="dropdown"></ul>
              </div>
            </div>
          </form>
        </div>
      </div>
</section>

<% if (crypto1 && crypto2) { %>
  <section id="compartingcoins">
    <div class="container comparing my-5 pb-4">
      <div class="mb-5">
        <ul class="list-group  list-unstyled list-group-horizontal justify-content-center">
          <li class="list-group-item c_active">
            <a href="#" class="toggle-price nav-link"><%= crypto2.symbol %> NOW</a>
          </li>
          <li class="list-group-item">
            <a href="#" class="toggle-price nav-link"><%= crypto2.symbol %> ATH</a>
          </li>
        </ul>
      </div>
      <div class="mb-4">
        <h3 class="mb-2"><span style="color: #9693f5;"><%= crypto1.symbol %></span> WITH THE MARKET CAP OF <span style="color: #9693f5;"><%= crypto2.symbol %></span></h3>
        <div class="d-flex justify-content-center align-items-center">
          <img src="<%= crypto1.logo_url %>" alt="" style="width: 34px; height: 34px; margin-right: 10px;">
          <h2 m-0>$<span id="price"><%= (crypto1.price*(crypto2.market_cap/crypto1.market_cap)).toFixed(2) %></span> <span class="multiple" style="color: #38c983;">(<%= (crypto2.market_cap/crypto1.market_cap).toFixed(2) %>x)</span></h2>
        </div>    
      </div>
      <div class="d-flex justify-content-center">
        <input type="text" class="crypto form-control w-75" placeholder="Amount" id="amount" name="famount">
      </div>
    </div>
  </section>
<% } %>

<section id="topCryptos">
  <div class="container pt-5">
    <div class="d-flex justify-content-center mb-3">
      <h1 class="mb-1" style="color: #9593f5;">Top 20 Crypto</h1>
    </div>
    <div class="d-flex justify-content-center">

      <form id="coin-form" method="get" class="d-flex gap-1">
        <div>
          <input autocomplete="off" type="text" class="search-bar crypto form-control" placeholder="Coin Symbol (BTC)" id="search-bar-3" name="fcoin">
          <ul id="suggestions-3" class="dropdown"></ul>
        </div>
        <div>
          <button type="submit" class="calculatebutton btn">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
                <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0"/>
            </svg>
          </button>
        </div>
      </form>
      
    </div>
      <div class="table-responsive mt-3">
        <table class="table-dark crtable">
          <thead> 
            <tr>
              <th scope="col">#</th>
              <th scope="col">Name</th>
              <th scope="col">Price</th>
              <th scope="col">Market Cap</th>
              <th scope="col">Volume(24h)</th>
              <th scope="col">Circulating Supply</th>
            </tr>
          </thead>
          <% if (data.length > 0) { %>
          <tbody>
            <% for( let i = 0; i < data.length; i++ ) { %>
              <tr>
                <td><%= i+1 %></td>
                <td><a href="/coin/<%= data[i].name %>" style="text-decoration: none; color: white;"><img src="<%= data[i].logo_url %>" class = "cryptologos" alt="Logo" style="width: 32px; height: auto; margin-right: 5px;" /><span><%= data[i].name %> <span style="font-weight: 400; color: #595f70;";"><%= data[i].symbol %></span></span></a></td>
                <td>$<%= Number(Number(data[i].price).toFixed(2)).toLocaleString() %></td>
                <td>$<%= Number(Number(data[i].market_cap).toFixed(2)).toLocaleString() %></td>
                <td>$<%= Number(Number(data[i].volume_24h).toFixed(2)).toLocaleString() %></td>
                <td><%=  Number(data[i].circulating_supply).toFixed(0) %></td>
              </tr>
            <% } %>
          </tbody>
          <% } else { %>
            <tr>
              <td colspan="6" class="text-center">No data found</td>
            </tr>
          <% } %>
        </table>
      </div>
  </div>
</section>

<script src="/search.js"></script>
<script src="/listeners.js"></script>
<%- include('template/footer.ejs') %>